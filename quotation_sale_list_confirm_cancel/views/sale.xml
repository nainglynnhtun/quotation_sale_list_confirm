<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
  <record id="quotation_tree_view_inherit_button" model="ir.ui.view">
    <field name="name">quotation.tree.inherit.buttons</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding" />
    <field name="arch" type="xml">
      <field name="state" position="after">
        <button string="Confirm"
                name="action_confirm"
                type="object"
                icon="fa-arrow-right"
                states="draft" />
        <button string="Cancel"
                name="action_cancel"
                type="object"
                icon="fa-times"
                states="draft" />
        <button string="Set to Quotation"
                name="action_draft" 
                icon="fa-refresh"
                type="object" 
                states="cancel" 
                />
        <button string="Create Invoice"
                name="action_create_invoice"
                type="object"
                icon="fa-pencil-square-o"
                attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"
        />
        <button string="Create Invoice"
                name="action_create_invoice"
                type="object"
                icon="fa-pencil-square-o"
                attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"
        />
      </field>
    </field>
  </record>

    <record id="order_tree_view_inherit_button" model="ir.ui.view">
        <field name="name">inherit.order.tree.inherit.button</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree" />
        <field name="arch" type="xml">
          <field name="state" position="after">
            <button string="Create Invoice"
                    name="action_create_invoice"
                    type="object"
                    icon="fa-pencil-square-o"
                    attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"
            />
            <button string="Create Invoice"
                    name="action_create_invoice"
                    type="object"
                    icon="fa-pencil-square-o"
                    attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"
            />
            <button string="Set to Quotation"
                    name="action_draft" 
                    states="cancel" 
                    type="object" 
                    icon="fa-refresh" 
                    />
          </field>
        </field>
      </record> 
</odoo>